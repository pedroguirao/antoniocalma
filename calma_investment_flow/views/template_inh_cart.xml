<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <template id="website_sale_products_inh_add_to_cart"
                  inherit_id="website_sale.product" customize_show="True"
                  name="website_sale_products_inh_add_to_cart">
            <xpath expr='//div[@class="js_product js_main_product"]/a'
                   position='replace'>
                    <a role="button" id="add_to_cart"
                       class="btn btn-primary btn-lg mt8 js_check_product a-submit" href="#">Invertir</a>
            </xpath>
    </template>


    <template id="website_sale_inh_cart_lines"
                  inherit_id="website_sale.cart_lines" customize_show="True"
                  name="website_sale_inh_cart_lines">
            <xpath expr='//table[@id="cart_products"]'
                   position='replace'>

        <table class="table" id="cart_products" t-if="website_sale_order and website_sale_order.website_order_line">
            <thead>
                <tr>
                    <th colspan="6" align="center" class="td-img">Oportunidad
                    </th>

                </tr>
            </thead>
            <tbody>
                <t t-foreach="website_sale_order.website_order_line" t-as="line">
                    <tr >
                        <td colspan="2"
                            rowspan="8"
                            t-if="not line.product_id.product_tmpl_id"
                            class='td-img'></td>
                        <td colspan="2"
                            rowspan="4" align="center"
                            t-if="line.product_id.product_tmpl_id" class='td-img'>
                            <span t-field="line.product_id.image_medium"
                                  t-options="{'widget': 'image', 'class': 'rounded'}" />
                        </td>
                        <td t-if="line.product_id.product_tmpl_id" class='td-product_name'>
                            <div>
                                <t t-call="website_sale.cart_line_product_link">
                                    <strong t-field="line.name_short" />
                                </t>
                            </div>
                            <t t-call="website_sale.cart_line_description_following_lines">
                                <t t-set="div_class" t-value="'d-none d-md-block'"/>
                            </t>
                        </td>
                        <td class="text-center td-qty">
                            <strong t-field="line.product_uom_qty" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                        </td>
                        <td >
                        </td>
                        <td>
                        </td>
                    </tr>
                    <tr/>
                    <tr/>
                    <tr>
                         <td colspan="2"
                            rowspan="8"
                            ></td>
                        <td colspan="2"
                            rowspan="4" align="center">
                        </td>
                        <td class='td-product_name'>
                            <div>

                                <strong>Si confirmas obtendras una
                                    rentabilidad del </strong>

                            </div>
                            <t t-call="website_sale.cart_line_description_following_lines">
                                <t t-set="div_class" t-value="'d-none d-md-block'"/>
                            </t>
                        </td>
                        <td >
                        </td>
                        <td >
                        </td>
                        <td>
                        </td>
                    </tr>
                    <tr>
                         <td colspan="2"
                            rowspan="8"
                            ></td>
                        <td colspan="2"
                            rowspan="4" align="center">
                        </td>
                        <td class='td-product_name'>
                            <div>

                                <strong
                                        t-field="line.product_id.rentabilidad_total">%</strong>

                            </div>
                            <t t-call="website_sale.cart_line_description_following_lines">
                                <t t-set="div_class" t-value="'d-none d-md-block'"/>
                            </t>
                        </td>
                        <td >
                        </td>
                        <td >
                        </td>
                        <td>
                        </td>
                    </tr>
                    <tr/>
                    <tr/>
                    <tr/>
                    <tr/>
                    <tr/>
                </t>
            </tbody>
        </table>
        </xpath>
    </template>

    <template id="header_calma" inherit_id="website_sale.header"
              name="Header Shop My Cart Link Calma">
        <xpath expr="//header//ul[@id='top_menu']/li[@id='my_cart']"
               position="replace">

        </xpath>
    </template>

    <template id="website_sale_products_inh_payment"
                  inherit_id="website_sale.payment" customize_show="True"
                  name="website_sale_products_inh_payment">
        <xpath expr='//div[@id="wrap"]'
                   position='replace'>
            <div id="wrap">
                <div class="container oe_website_sale py-2">
                    <div class="row">

                        <div class="col-12" t-if="errors">
                            <t t-foreach="errors" t-as="error">
                                <div class="alert alert-danger" t-if="error" role="alert">
                                    <h4>
                                        <t t-esc="error[0]" />
                                    </h4>
                                    <t t-esc="error[1]" />
                                </div>
                            </t>
                        </div>

                        <div class="col-12 col-xl order-xl-1 oe_cart">
                            <t t-call="calma_grid.website_sale_inh_cart_lines"/>

                            <div class="oe_structure clearfix mt-3" id="oe_structure_website_sale_payment_1"/>

                            <div id="payment_method" class="mt-3" t-if="(acquirers or tokens) and website_sale_order.amount_total">

                                  <div class="row" id="wallet_boxes">
                                      <div class="col-lg-8 col-sm-9 mt8 mb16" t-if="website_sale_order and not website_sale_order.wallet_txn_id and website_sale_order.partner_wallet_balance">
                                        <h3>Pay using Wallet</h3>
                                          <p>
                                            <b><h4>Wallet Balance:
                                            <span class="badge">
                                                <span class="oe_currency_value">

                                                    <t t-esc="website_sale_order.partner_wallet_balance" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: website.currency_id}"/>

                                                </span>
                                            </span>
                                            </h4> </b></p>
                                      </div>
                                  </div>
                                <div class="clearfix" />
                                    <a role="button" href="/shop" class="btn btn-secondary mb32 d-none d-xl-inline-block">
                                        <span class="fa fa-chevron-left" />
                                        <span class="">Ver Oportunidades</span>
                                    </a>
                                    <a role="button"
                                       t-if="website_sale_order and website_sale_order.website_order_line" class="btn btn-primary float-right d-none d-xl-inline-block" href="/shop/wallet/pay">
                                        <span class="">Confirmar
                                            Inversi√≥n</span>
                                        <span class="fa fa-chevron-right" />
                                    </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure" id="oe_structure_website_sale_payment_2"/>
            </div>
        </xpath>

    </template>


</odoo>
